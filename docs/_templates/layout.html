{% extends "!layout.html" %}
{% set rellinks = rellinks + [('contents', 'Contents', 'C', 'Contents')] %}

<!-- overriding the whole header because agogo doesn't make it quite granular enough for me. -->

{% block header %}
    <div class="header-wrapper">
      <div class="header">
        {%- if logo %}
          <p class="logo"><a href="{{ pathto(master_doc) }}">
            <img class="logo" src="{{ pathto('_static/' + logo, 1) }}" alt="Logo"/>
          </a></p>
        {%- endif %}
        {%- block headertitle %}
        <h1><a href="{{ pathto(master_doc) }}">{{ shorttitle|e }}</a></h1>
        {%- endblock %}
        <div class="rel">
          {%- for rellink in rellinks|reverse %}
          <a href="{{ pathto(rellink[0]) }}" title="{{ rellink[1]|striptags|e }}"
             {{ accesskey(rellink[2]) }}>
	       {% if rellink[3] in ('next', 'previous') %}{{rellink[3]}} : {{rellink[1]|striptags|truncate(length=24)|e }}</a>
               {% else %}{{ rellink[3] }}</a>
	       {% endif %}
          {%- if not loop.last %}{{ reldelim2 }}{% endif %}
          {%- endfor %}
        </div>
       </div>
    </div>
{% endblock %}

{% block sidebartoc %}
  <h3>{{ _('This Page') }}</h3>
  {{ toc }}
  <br />
  <h3>{{ _('Chapters') }}</h3>
  {{ toctree(collapse=false, maxdepth=1) }}
  <br />
  <h4><a href="{{ pathto('contents') }}">Full Table of Contents</a></h4>
{% endblock %}
